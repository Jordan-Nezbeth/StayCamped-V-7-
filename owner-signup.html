<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>List Your Camper | StayCamped</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script src="owner-signup.js"></script>

<body>
<script type="module">
  // ✅ Replace with your real project URL and anon key from Supabase
  const SUPABASE_URL = 'https://your-project-url.supabase.co';
  const SUPABASE_ANON_KEY = 'your-anon-public-key';

  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  const form = document.querySelector('#camper-form');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const camperData = {
      name: document.querySelector('#name').value,
      email: document.querySelector('#email').value,
      phone: document.querySelector('#phone').value,
      camper: document.querySelector('#camper').value,
      campground: document.querySelector('#campground').value,
      siteNumber: document.querySelector('#siteNumber').value,
      setupNotes: document.querySelector('#setupNotes').value,
    };

    const { data, error } = await supabase
      .from('camper_signups')
      .insert([camperData]);

    if (error) {
      alert('Error submitting form. Please try again.');
      console.error(error);
    } else {
      alert('Thanks for submitting your camper!');
      form.reset();
    }
  });
</script>
  <header>
    <a href="index.html">
      <img src="logo.png" alt="StayCamped Logo" class="logo" />
    </a>
    <nav>
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="owner-signup.html">List Your Camper</a>
      <a href="guest-signup.html">Book a Stay</a>
      <a href="onboard.html">Partner Onboarding</a>
    </nav>
  </header>

  <main>
    <section class="owner-signup">
      <h2>List Your Camper</h2>
      <p>Complete the form below to list your camper at a campground. Make sure to provide accurate setup notes and site information.</p>

      <form id="camperForm">
        <label for="owner_name">Your Name:</label>
        <input type="text" id="owner_name" name="owner_name" required />

        <label for="camper_model">Camper Model:</label>
        <input type="text" id="camper_model" name="camper_model" required />

        <label for="campground">Campground Name:</label>
        <input type="text" id="campground" name="campground" required />

        <label for="site_number">Site Number:</label>
        <input type="text" id="site_number" name="site_number" />

        <label for="setup_notes">Setup Notes:</label>
        <textarea id="setup_notes" name="setup_notes" rows="4"></textarea>

        <button type="submit">Submit Camper</button>
        <p id="formStatus" style="margin-top:10px;"></p>
      </form>
    </section>
  </main>

  <footer>
    <p>© 2025 StayCamped • Secure • Trusted • Support</p>
  </footer>

  <script>
    const SUPABASE_URL = 'https://YOUR_PROJECT_ID.supabase.co';
    const SUPABASE_KEY = 'YOUR_ANON_KEY';

    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    document.getElementById('camperForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const formStatus = document.getElementById('formStatus');

      const camperData = {
        owner_name: document.getElementById('owner_name').value,
        camper_model: document.getElementById('camper_model').value,
        campground: document.getElementById('campground').value,
        site_number: document.getElementById('site_number').value,
        setup_notes: document.getElementById('setup_notes').value,
      };

      const { error } = await supabase
        .from('camper_submissions')
        .insert([camperData]);

      if (error) {
        formStatus.textContent = '❌ Submission failed. Please try again.';
        console.error(error);
      } else {
        formStatus.textContent = '✅ Camper submitted successfully!';
        document.getElementById('camperForm').reset();
      }
    });
  </script>
</body>
</html>
